# Objectives Section

The `objectives{}` section defines win conditions for the map. All objectives must be completed for automatic victory, though scripts can provide alternative win conditions.

> **Note**: If the info section has an `oxygen:` statement, the map automatically has a requirement to not run out of air. If air ever reaches 0, the player loses the map.

## Objective Types

### 1. Building Construction
Requires constructing a specific number of buildings.

#### Format
```
building: ClassName [count]
```

#### Parameters
- **ClassName**: Building type (see list below)
- **count**: Optional number required (default: 1)

#### Building Classes
- `BuildingCanteen_C`
- `BuildingDocks_C`
- `BuildingElectricFence_C`
- `BuildingGeologicalCenter_C`
- `BuildingMiningLaser_C`
- `BuildingOreRefinery_C`
- `BuildingPowerStation_C`
- `BuildingSupportStation_C`
- `BuildingSuperTeleport_C`
- `BuildingTeleportPad_C`
- `BuildingToolStore_C`
- `BuildingUpgradeStation_C`

#### Example
```
objectives{
    building: BuildingToolStore_C
    building: BuildingPowerStation_C 2
    building: BuildingCanteen_C 3
}
```

### 2. Tile Discovery
Completes when a specific tile becomes visible.

#### Format
```
discovertile: row,col/Description text
```

#### Parameters
- **row,col**: Zero-indexed tile coordinates
- **Description**: Text shown in objectives panel

#### Example
```
objectives{
    discovertile: 10,15/Find the crystal cavern
    discovertile: 25,30/Discover the lost miners
}
```

### 3. Building Discovery
Completes when finding a pre-placed building.

#### Format
```
findbuilding: row,col
```

#### Parameters
- **row,col**: Building location (must exist)
- Description auto-generated by game

#### Example
```
objectives{
    findbuilding: 20,20
    findbuilding: 35,40
}
```

### 4. Resource Collection
Requires collecting specific amounts of resources.

#### Format
```
resources: crystals,ore,studs
```

#### Parameters
- **crystals**: Crystal requirement
- **ore**: Ore requirement
- **studs**: Building stud requirement
- Use 0 for no requirement

#### Notes
- Only ONE resources objective allowed per map
- Counts current inventory, not total collected

#### Example
```
objectives{
    resources: 50,25,100
}
```

### 5. Variable Condition
Uses script conditionals for complex objectives.

#### Format
```
variable: condition/Description text
```

#### Parameters
- **condition**: Script conditional (no parentheses)
- **Description**: Objective text

#### Available Conditions
- Resource checks: `crystals >= 100`
- Building counts: `buildings.BuildingDocks_C > 0`
- Time limits: `time < 600`
- Custom variables: `MyVariable == true`
- Complex logic: `crystals >= 50 and ore >= 25`

#### Example
```
objectives{
    variable: crystals >= 100/Collect 100 crystals
    variable: time < 300/Complete within 5 minutes
    variable: miners >= 10/Recruit 10 Rock Raiders
}
```

> **Warning**: Be careful with variable conditions. If the condition has an error or is impossible to achieve through script logic, the user may not be able to win the map unless the script uses the `win` event. This can be useful for creating custom objectives communicated via `msg` events that aren't part of the objective display.

## Special Conditions

### Oxygen Requirement
If the info section includes `oxygen:` setting, an implicit objective is added:
- Don't run out of air
- Map fails immediately when oxygen reaches 0
- Not shown in objectives list

### Script Win/Lose
Scripts can override objectives:
- `win:` - Immediate victory
- `lose:` - Immediate failure
- Allows alternative victory conditions

## Complete Example

```
objectives{
    // Basic construction
    building: BuildingToolStore_C
    building: BuildingPowerStation_C 2
    
    // Resource collection
    resources: 100,50,0
    
    // Exploration
    discovertile: 30,30/Find the hidden cavern
    findbuilding: 45,45
    
    // Advanced conditions
    variable: crystals >= 150/Collect bonus crystals
    variable: time < 600/Complete within 10 minutes
}
```

## Validation Rules

1. **Coordinates**: Must be within map bounds
2. **Building locations**: Must have actual buildings
3. **Resources**: Only one resources objective allowed
4. **Variables**: Must be valid script syntax
5. **Reserved words**: Since the objective section is processed by the script engine, objective keywords (`building`, `discovertile`, `findbuilding`, `resources`, `variable`) are reserved words in script - no event chain or variables may have these names

## Performance Considerations

- Variable objectives evaluated every game tick
- Too many variable objectives can impact performance
- Simple objectives (building, resources) are more efficient
- Complex conditionals in variables add overhead

## Strategy Tips

### Early Game Objectives
- Single Tool Store construction
- Small resource amounts (10-20 crystals)
- Nearby tile discoveries

### Mid Game Objectives
- Multiple building types
- Moderate resources (50-100)
- Deeper exploration requirements

### Late Game Objectives
- Complex building combinations
- Large resource requirements
- Time-based challenges
- Multiple discovery objectives

## Common Patterns

### Tutorial Progression
```
objectives{
    building: BuildingToolStore_C
    variable: miners >= 3/Teleport 3 Rock Raiders
    resources: 20,0,0
}
```

### Exploration Focus
```
objectives{
    discovertile: 40,40/Find the crystal cache
    discovertile: 60,60/Locate the ore deposit
    findbuilding: 80,80
}
```

### Resource Challenge
```
objectives{
    resources: 200,100,500
    variable: crystals >= 300/Bonus: Collect 300 crystals
}
```

## Important Behavior Notes

- **Objectives are loaded at map start** - cannot be changed during runtime
- **Once completed, objectives stay completed** - even if condition becomes false later (e.g., building 5 Tool Stores then deleting them)
- **"variable" is a reserved word** - do not use it for script variables or event chains
- **Prevent auto-win** - use a final objective that only becomes true after win event to control victory timing

## See Also
- [Script Section](script.md) - Alternative win conditions
- [Info Section](info.md) - Oxygen settings
- [Buildings Section](buildings.md) - Pre-placed buildings
- [Resources Section](resources.md) - Available resources